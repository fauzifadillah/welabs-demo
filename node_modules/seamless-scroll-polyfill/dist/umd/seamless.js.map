{"version":3,"file":"seamless.js","sources":["../../src/common.ts","../../src/Element.scroll.ts","../../src/Element.scrollBy.ts","../../src/Element.scrollIntoView.ts","../../src/Element.scrollTo.ts","../../src/Window.scroll.ts","../../src/Window.scrollBy.ts","../../src/Window.scrollTo.ts","../../src/index.ts"],"sourcesContent":["const ease = (k: number) => {\n    return 0.5 * (1 - Math.cos(Math.PI * k));\n};\n\nconst DURATION = 500;\n\nexport const isScrollBehaviorSupported = (): boolean => \"scrollBehavior\" in document.documentElement.style;\n\nexport const original = {\n    _elementScroll: undefined as typeof Element.prototype.scroll | undefined,\n    get elementScroll() {\n        return (this._elementScroll ||=\n            HTMLElement.prototype.scroll ||\n            HTMLElement.prototype.scrollTo ||\n            function (this: Element, x: number, y: number) {\n                this.scrollLeft = x;\n                this.scrollTop = y;\n            });\n    },\n\n    _elementScrollIntoView: undefined as typeof Element.prototype.scrollIntoView | undefined,\n    get elementScrollIntoView() {\n        return (this._elementScrollIntoView ||= HTMLElement.prototype.scrollIntoView);\n    },\n\n    _windowScroll: undefined as typeof window.scroll | undefined,\n    get windowScroll() {\n        return (this._windowScroll ||= window.scroll || window.scrollTo);\n    },\n};\n\ntype Prototype = typeof HTMLElement.prototype | typeof SVGElement.prototype | typeof Element.prototype;\n\nexport const modifyPrototypes = (modification: (prototype: Prototype) => void): void => {\n    const prototypes = [HTMLElement.prototype, SVGElement.prototype, Element.prototype];\n    prototypes.forEach((prototype) => modification(prototype));\n};\n\nexport interface IAnimationOptions {\n    duration?: number;\n    timingFunc?: (k: number) => number;\n}\n\nexport interface IScrollToOptions extends ScrollToOptions, IAnimationOptions {}\n\nexport interface IScrollIntoViewOptions extends ScrollIntoViewOptions, IAnimationOptions {}\n\nexport interface IContext extends IAnimationOptions {\n    timeStamp: number;\n    startX: number;\n    startY: number;\n    targetX: number;\n    targetY: number;\n    rafId: number;\n    method: (x: number, y: number) => void;\n    callback: () => void;\n}\n\nexport const now = (): number => window.performance?.now?.() ?? Date.now();\n\nexport const step = (context: IContext): void => {\n    const currentTime = now();\n\n    const elapsed = (currentTime - context.timeStamp) / (context.duration || DURATION);\n    if (elapsed > 1) {\n        context.method(context.targetX, context.targetY);\n        context.callback();\n        return;\n    }\n    const value = (context.timingFunc || ease)(elapsed);\n\n    const currentX = context.startX + (context.targetX - context.startX) * value;\n    const currentY = context.startY + (context.targetY - context.startY) * value;\n\n    context.method(currentX, currentY);\n\n    context.rafId = requestAnimationFrame(() => {\n        step(context);\n    });\n};\n\n// https://drafts.csswg.org/cssom-view/#normalize-non-finite-values\nexport const nonFinite = (value: number): number => {\n    if (!isFinite(value)) {\n        return 0;\n    }\n    return Number(value);\n};\n\nexport const isObject = (value: unknown): value is Record<string, unknown> => {\n    const type = typeof value;\n    return value !== null && (type === \"object\" || type === \"function\");\n};\n","import {\n    IAnimationOptions,\n    IContext,\n    IScrollToOptions,\n    isObject,\n    isScrollBehaviorSupported,\n    modifyPrototypes,\n    nonFinite,\n    now,\n    original,\n    step,\n} from \"./common.js\";\n\nexport const elementScroll = (element: Element, options: IScrollToOptions): void => {\n    const originalBoundFunc = original.elementScroll.bind(element);\n\n    if (options.left === undefined && options.top === undefined) {\n        return;\n    }\n\n    const startX = element.scrollLeft;\n    const startY = element.scrollTop;\n\n    const targetX = nonFinite(options.left ?? startX);\n    const targetY = nonFinite(options.top ?? startY);\n\n    if (options.behavior !== \"smooth\") {\n        return originalBoundFunc(targetX, targetY);\n    }\n\n    const removeEventListener = () => {\n        window.removeEventListener(\"wheel\", cancelScroll);\n        window.removeEventListener(\"touchmove\", cancelScroll);\n    };\n\n    const context: IContext = {\n        timeStamp: now(),\n        duration: options.duration,\n        startX,\n        startY,\n        targetX,\n        targetY,\n        rafId: 0,\n        method: originalBoundFunc,\n        timingFunc: options.timingFunc,\n        callback: removeEventListener,\n    };\n\n    const cancelScroll = () => {\n        cancelAnimationFrame(context.rafId);\n        removeEventListener();\n    };\n\n    window.addEventListener(\"wheel\", cancelScroll, {\n        passive: true,\n        once: true,\n    });\n    window.addEventListener(\"touchmove\", cancelScroll, {\n        passive: true,\n        once: true,\n    });\n\n    step(context);\n};\n\nexport const elementScrollPolyfill = (animationOptions?: IAnimationOptions): void => {\n    if (isScrollBehaviorSupported()) {\n        return;\n    }\n\n    const originalFunc = original.elementScroll;\n\n    modifyPrototypes(\n        (prototype) =>\n            (prototype.scroll = function scroll() {\n                if (arguments.length === 1) {\n                    const scrollOptions = arguments[0];\n                    if (!isObject(scrollOptions)) {\n                        throw new TypeError(\n                            \"Failed to execute 'scroll' on 'Element': parameter 1 ('options') is not an object.\",\n                        );\n                    }\n\n                    return elementScroll(this, { ...scrollOptions, ...animationOptions });\n                }\n\n                return originalFunc.apply(this, arguments as any);\n            }),\n    );\n};\n","import {\n    IAnimationOptions,\n    IScrollToOptions,\n    isObject,\n    isScrollBehaviorSupported,\n    modifyPrototypes,\n    nonFinite,\n} from \"./common.js\";\nimport { elementScroll } from \"./Element.scroll.js\";\n\nexport const elementScrollBy = (element: Element, options: IScrollToOptions): void => {\n    const left = nonFinite(options.left || 0) + element.scrollLeft;\n    const top = nonFinite(options.top || 0) + element.scrollTop;\n\n    return elementScroll(element, { ...options, left, top });\n};\n\nexport const elementScrollByPolyfill = (animationOptions?: IAnimationOptions): void => {\n    if (isScrollBehaviorSupported()) {\n        return;\n    }\n\n    modifyPrototypes(\n        (prototype) =>\n            (prototype.scrollBy = function scrollBy() {\n                if (arguments.length === 1) {\n                    const scrollByOptions = arguments[0];\n                    if (!isObject(scrollByOptions)) {\n                        throw new TypeError(\n                            \"Failed to execute 'scrollBy' on 'Element': parameter 1 ('options') is not an object.\",\n                        );\n                    }\n\n                    return elementScrollBy(this, { ...scrollByOptions, ...animationOptions });\n                }\n\n                const left = Number(arguments[0]);\n                const top = Number(arguments[1]);\n\n                return elementScrollBy(this, { left, top });\n            }),\n    );\n};\n","import {\n    IAnimationOptions,\n    IScrollIntoViewOptions,\n    isObject,\n    isScrollBehaviorSupported,\n    modifyPrototypes,\n    original,\n} from \"./common.js\";\nimport { elementScroll } from \"./Element.scroll.js\";\n\nconst enum ScrollAlignment {\n    ToEdgeIfNeeded,\n    CenterAlways,\n    LeftOrTop,\n    RightOrBottom,\n}\n\nconst enum WritingMode {\n    HorizontalTb,\n    VerticalRl,\n    VerticalLr,\n    SidewaysRl,\n    SidewaysLr,\n}\n\n// https://drafts.csswg.org/css-writing-modes-4/#block-flow\nconst normalizeWritingMode = (writingMode: string): WritingMode => {\n    switch (writingMode) {\n        case \"horizontal-tb\":\n        case \"lr\":\n        case \"lr-tb\":\n        case \"rl\":\n        case \"rl-tb\":\n            return WritingMode.HorizontalTb;\n\n        case \"vertical-rl\":\n        case \"tb\":\n        case \"tb-rl\":\n            return WritingMode.VerticalRl;\n\n        case \"vertical-lr\":\n        case \"tb-lr\":\n            return WritingMode.VerticalLr;\n\n        case \"sideways-rl\":\n            return WritingMode.SidewaysRl;\n\n        case \"sideways-lr\":\n            return WritingMode.SidewaysLr;\n    }\n\n    return WritingMode.HorizontalTb;\n};\n\ntype Tuple2<T> = [T, T];\n\n// https://source.chromium.org/chromium/chromium/src/+/main:third_party/blink/renderer/core/dom/element.cc;l=1097-1189;drc=6a7533d4a1e9f2372223a9d912a9e53a6fa35ae0\nconst toPhysicalAlignment = (\n    options: ScrollIntoViewOptions,\n    writingMode: WritingMode,\n    isLTR: boolean,\n): Tuple2<ScrollAlignment> => {\n    let [xPos, yPos] = [options.block || \"start\", options.inline || \"nearest\"];\n\n    /**  0b{vertical}{horizontal}  0: normal, 1: reverse */\n    let layout = 0b00;\n\n    const enum OP {\n        ReverseHorizontal = 0b01,\n        ReverseVertical = 0b10,\n    }\n\n    /**\n     * WritingMode.VerticalLr: ↓→\n     * | 1 | 4 |   |\n     * | 2 | 5 |   |\n     * | 3 |   |   |\n     *\n     * RTL: ↑→\n     * | 3 |   |   |\n     * | 2 | 5 |   |\n     * | 1 | 4 |   |\n     */\n    if (!isLTR) {\n        layout ^= OP.ReverseVertical;\n    }\n\n    switch (writingMode) {\n        /**\n         * ↓→\n         * | 1 | 2 | 3 |\n         * | 4 | 5 |   |\n         * |   |   |   |\n         *\n         * RTL: ↓←\n         * | 3 | 2 | 1 |\n         * |   | 5 | 4 |\n         * |   |   |   |\n         */\n        case WritingMode.HorizontalTb:\n            // swap horizontal and vertical\n            layout = (layout >> 1) | ((layout & 1) << 1);\n            [xPos, yPos] = [yPos, xPos];\n            break;\n\n        /**\n         * ↓←\n         * |   | 4 | 1 |\n         * |   | 5 | 2 |\n         * |   |   | 3 |\n         *\n         * RTL: ↑←\n         * |   |   | 3 |\n         * |   | 5 | 2 |\n         * |   | 4 | 1 |\n         */\n        case WritingMode.VerticalRl:\n        case WritingMode.SidewaysRl:\n            //  reverse horizontal\n            layout ^= OP.ReverseHorizontal;\n            break;\n\n        /**\n         * ↑→\n         * | 3 |   |   |\n         * | 2 | 5 |   |\n         * | 1 | 4 |   |\n         *\n         * RTL: ↓→\n         * | 1 | 4 |   |\n         * | 2 | 5 |   |\n         * | 3 |   |   |\n         */\n        case WritingMode.SidewaysLr:\n            // reverse vertical\n            layout ^= OP.ReverseVertical;\n            break;\n    }\n\n    return [xPos, yPos].map((value, index) => {\n        switch (value) {\n            case \"center\":\n                return ScrollAlignment.CenterAlways;\n            case \"nearest\":\n                return ScrollAlignment.ToEdgeIfNeeded;\n\n            default: {\n                const reverse = (layout >> index) & 1;\n                return (value === \"start\") === !reverse ? ScrollAlignment.LeftOrTop : ScrollAlignment.RightOrBottom;\n            }\n        }\n    }) as Tuple2<ScrollAlignment>;\n};\n\n// code from stipsan/compute-scroll-into-view\n// https://github.com/stipsan/compute-scroll-into-view/blob/5396c6b78af5d0bbce11a7c4e93cc3146546fcd3/src/index.ts\n/**\n * Find out which edge to align against when logical scroll position is \"nearest\"\n * Interesting fact: \"nearest\" works similarily to \"if-needed\", if the element is fully visible it will not scroll it\n *\n * Legends:\n * ┌────────┐ ┏ ━ ━ ━ ┓\n * │ target │   frame\n * └────────┘ ┗ ━ ━ ━ ┛\n */\nconst alignNearest = (\n    scrollingEdgeStart: number,\n    scrollingEdgeEnd: number,\n    scrollingSize: number,\n    scrollingBorderStart: number,\n    scrollingBorderEnd: number,\n    elementEdgeStart: number,\n    elementEdgeEnd: number,\n    elementSize: number,\n): number => {\n    /**\n     * If element edge A and element edge B are both outside scrolling box edge A and scrolling box edge B\n     *\n     *          ┌──┐\n     *        ┏━│━━│━┓\n     *          │  │\n     *        ┃ │  │ ┃        do nothing\n     *          │  │\n     *        ┗━│━━│━┛\n     *          └──┘\n     *\n     *  If element edge C and element edge D are both outside scrolling box edge C and scrolling box edge D\n     *\n     *    ┏ ━ ━ ━ ━ ┓\n     *   ┌───────────┐\n     *   │┃         ┃│        do nothing\n     *   └───────────┘\n     *    ┗ ━ ━ ━ ━ ┛\n     */\n    if (\n        (elementEdgeStart < scrollingEdgeStart && elementEdgeEnd > scrollingEdgeEnd) ||\n        (elementEdgeStart > scrollingEdgeStart && elementEdgeEnd < scrollingEdgeEnd)\n    ) {\n        return 0;\n    }\n\n    /**\n     * If element edge A is outside scrolling box edge A and element height is less than scrolling box height\n     *\n     *          ┌──┐\n     *        ┏━│━━│━┓         ┏━┌━━┐━┓\n     *          └──┘             │  │\n     *  from  ┃      ┃     to  ┃ └──┘ ┃\n     *\n     *        ┗━ ━━ ━┛         ┗━ ━━ ━┛\n     *\n     * If element edge B is outside scrolling box edge B and element height is greater than scrolling box height\n     *\n     *        ┏━ ━━ ━┓         ┏━┌━━┐━┓\n     *                           │  │\n     *  from  ┃ ┌──┐ ┃     to  ┃ │  │ ┃\n     *          │  │             │  │\n     *        ┗━│━━│━┛         ┗━│━━│━┛\n     *          │  │             └──┘\n     *          │  │\n     *          └──┘\n     *\n     * If element edge C is outside scrolling box edge C and element width is less than scrolling box width\n     *\n     *       from                 to\n     *    ┏ ━ ━ ━ ━ ┓         ┏ ━ ━ ━ ━ ┓\n     *  ┌───┐                 ┌───┐\n     *  │ ┃ │       ┃         ┃   │     ┃\n     *  └───┘                 └───┘\n     *    ┗ ━ ━ ━ ━ ┛         ┗ ━ ━ ━ ━ ┛\n     *\n     * If element edge D is outside scrolling box edge D and element width is greater than scrolling box width\n     *\n     *       from                 to\n     *    ┏ ━ ━ ━ ━ ┓         ┏ ━ ━ ━ ━ ┓\n     *        ┌───────────┐   ┌───────────┐\n     *    ┃   │     ┃     │   ┃         ┃ │\n     *        └───────────┘   └───────────┘\n     *    ┗ ━ ━ ━ ━ ┛         ┗ ━ ━ ━ ━ ┛\n     */\n    if (\n        (elementEdgeStart <= scrollingEdgeStart && elementSize <= scrollingSize) ||\n        (elementEdgeEnd >= scrollingEdgeEnd && elementSize >= scrollingSize)\n    ) {\n        return elementEdgeStart - scrollingEdgeStart - scrollingBorderStart;\n    }\n\n    /**\n     * If element edge B is outside scrolling box edge B and element height is less than scrolling box height\n     *\n     *        ┏━ ━━ ━┓         ┏━ ━━ ━┓\n     *\n     *  from  ┃      ┃     to  ┃ ┌──┐ ┃\n     *          ┌──┐             │  │\n     *        ┗━│━━│━┛         ┗━└━━┘━┛\n     *          └──┘\n     *\n     * If element edge A is outside scrolling box edge A and element height is greater than scrolling box height\n     *\n     *          ┌──┐\n     *          │  │\n     *          │  │             ┌──┐\n     *        ┏━│━━│━┓         ┏━│━━│━┓\n     *          │  │             │  │\n     *  from  ┃ └──┘ ┃     to  ┃ │  │ ┃\n     *                           │  │\n     *        ┗━ ━━ ━┛         ┗━└━━┘━┛\n     *\n     * If element edge C is outside scrolling box edge C and element width is greater than scrolling box width\n     *\n     *           from                 to\n     *        ┏ ━ ━ ━ ━ ┓         ┏ ━ ━ ━ ━ ┓\n     *  ┌───────────┐           ┌───────────┐\n     *  │     ┃     │   ┃       │ ┃         ┃\n     *  └───────────┘           └───────────┘\n     *        ┗ ━ ━ ━ ━ ┛         ┗ ━ ━ ━ ━ ┛\n     *\n     * If element edge D is outside scrolling box edge D and element width is less than scrolling box width\n     *\n     *           from                 to\n     *        ┏ ━ ━ ━ ━ ┓         ┏ ━ ━ ━ ━ ┓\n     *                ┌───┐             ┌───┐\n     *        ┃       │ ┃ │       ┃     │   ┃\n     *                └───┘             └───┘\n     *        ┗ ━ ━ ━ ━ ┛         ┗ ━ ━ ━ ━ ┛\n     *\n     */\n    if (\n        (elementEdgeEnd > scrollingEdgeEnd && elementSize < scrollingSize) ||\n        (elementEdgeStart < scrollingEdgeStart && elementSize > scrollingSize)\n    ) {\n        return elementEdgeEnd - scrollingEdgeEnd + scrollingBorderEnd;\n    }\n\n    return 0;\n};\n\nconst canOverflow = (overflow: string | null): boolean => {\n    return overflow !== \"visible\" && overflow !== \"clip\";\n};\n\nconst getFrameElement = (element: Element): Element | null => {\n    if (!element.ownerDocument || !element.ownerDocument.defaultView) {\n        return null;\n    }\n\n    try {\n        return element.ownerDocument.defaultView.frameElement;\n    } catch (e) {\n        return null;\n    }\n};\n\nconst isHiddenByFrame = (element: Element): boolean => {\n    const frame = getFrameElement(element);\n    if (!frame) {\n        return false;\n    }\n\n    return frame.clientHeight < element.scrollHeight || frame.clientWidth < element.scrollWidth;\n};\n\nconst isScrollable = (element: Element, computedStyle: CSSStyleDeclaration): boolean => {\n    if (element.clientHeight < element.scrollHeight || element.clientWidth < element.scrollWidth) {\n        return canOverflow(computedStyle.overflowY) || canOverflow(computedStyle.overflowX) || isHiddenByFrame(element);\n    }\n\n    return false;\n};\n\nconst parentElement = (element: Element): Element | null => {\n    const parentNode = element.parentNode;\n\n    if (parentNode !== null && parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        return (parentNode as ShadowRoot).host;\n    }\n\n    return parentNode as Element | null;\n};\n\nconst clamp = (value: number, width: number): number => {\n    if (value < -width) {\n        return -width;\n    }\n\n    if (value > width) {\n        return width;\n    }\n\n    return value;\n};\n\nconst isCSSPropertySupported = (property: string): boolean => property in document.documentElement.style;\n\nconst getSupportedScrollMarginProperty = (): string => {\n    // Webkit uses \"scroll-snap-margin\" https://bugs.webkit.org/show_bug.cgi?id=189265.\n    return [\"scroll-margin\", \"scroll-snap-margin\"].filter(isCSSPropertySupported)[0];\n};\n\nconst getElementScrollSnapArea = (element: Element, computedStyle: CSSStyleDeclaration) => {\n    const { top, right, bottom, left } = element.getBoundingClientRect();\n    const [scrollMarginTop, scrollMarginRight, scrollMarginBottom, scrollMarginLeft] = [\n        \"top\",\n        \"right\",\n        \"bottom\",\n        \"left\",\n    ].map((edge) => {\n        const scrollProperty = getSupportedScrollMarginProperty();\n        const value = computedStyle.getPropertyValue(`${scrollProperty}-${edge}`);\n        return parseInt(value, 10) || 0;\n    });\n\n    return [top - scrollMarginTop, right + scrollMarginRight, bottom + scrollMarginBottom, left - scrollMarginLeft];\n};\n\nexport const elementScrollIntoView = (element: Element, options: IScrollIntoViewOptions): void => {\n    if (element.isConnected === false) {\n        return;\n    }\n\n    // On Chrome and Firefox, document.scrollingElement will return the <html> element.\n    // Safari, document.scrollingElement will return the <body> element.\n    // On Edge, document.scrollingElement will return the <body> element.\n    // IE11 does not support document.scrollingElement, but you can assume its <html>.\n    // Used to handle the top most element that can be scrolled\n    const scrollingElement = document.scrollingElement || document.documentElement;\n\n    // Collect all the scrolling boxes, as defined in the spec: https://drafts.csswg.org/cssom-view/#scrolling-box\n    const frames: Element[] = [];\n\n    const documentElementStyle = getComputedStyle(document.documentElement);\n\n    for (let cursor = parentElement(element); cursor !== null; cursor = parentElement(cursor)) {\n        // Stop when we reach the viewport\n        if (cursor === scrollingElement) {\n            frames.push(cursor);\n            break;\n        }\n\n        const cursorStyle = getComputedStyle(cursor);\n\n        // Skip document.body if it's not the scrollingElement and documentElement isn't independently scrollable\n        if (\n            cursor === document.body &&\n            isScrollable(cursor, cursorStyle) &&\n            !isScrollable(document.documentElement, documentElementStyle)\n        ) {\n            continue;\n        }\n\n        // Now we check if the element is scrollable,\n        // this code only runs if the loop haven't already hit the viewport or a custom boundary\n        if (isScrollable(cursor, cursorStyle)) {\n            frames.push(cursor);\n        }\n\n        if (cursorStyle.position === \"fixed\") {\n            break;\n        }\n    }\n\n    // Support pinch-zooming properly, making sure elements scroll into the visual viewport\n    // Browsers that don't support visualViewport\n    // will report the layout viewport dimensions on document.documentElement.clientWidth/Height\n    // and viewport dimensions on window.innerWidth/Height\n    // https://www.quirksmode.org/mobile/viewports2.html\n    // https://bokand.github.io/viewport/index.html\n    const viewportWidth = window.visualViewport ? window.visualViewport.width : innerWidth;\n    const viewportHeight = window.visualViewport ? window.visualViewport.height : innerHeight;\n\n    // Newer browsers supports scroll[X|Y], page[X|Y]Offset is\n    const viewportX = window.scrollX || window.pageXOffset;\n    const viewportY = window.scrollY || window.pageYOffset;\n\n    const computedStyle = getComputedStyle(element);\n\n    const [targetTop, targetRight, targetBottom, targetLeft] = getElementScrollSnapArea(element, computedStyle);\n    const targetHeight = targetBottom - targetTop;\n    const targetWidth = targetRight - targetLeft;\n\n    const writingMode = normalizeWritingMode(\n        computedStyle.writingMode ||\n            computedStyle.getPropertyValue(\"-webkit-writing-mode\") ||\n            computedStyle.getPropertyValue(\"-ms-writing-mode\"),\n    );\n\n    const isLTR = computedStyle.direction !== \"rtl\";\n\n    const [alignX, alignY] = toPhysicalAlignment(options, writingMode, isLTR);\n\n    let targetBlock = (() => {\n        switch (alignY) {\n            case ScrollAlignment.CenterAlways:\n                return targetTop + targetHeight / 2;\n\n            case ScrollAlignment.LeftOrTop:\n            case ScrollAlignment.ToEdgeIfNeeded:\n                return targetTop;\n\n            case ScrollAlignment.RightOrBottom:\n                return targetBottom;\n        }\n    })();\n\n    let targetInline = (() => {\n        switch (alignX) {\n            case ScrollAlignment.CenterAlways:\n                return targetLeft + targetWidth / 2;\n\n            case ScrollAlignment.RightOrBottom:\n                return targetRight;\n\n            case ScrollAlignment.LeftOrTop:\n            case ScrollAlignment.ToEdgeIfNeeded:\n                return targetLeft;\n        }\n    })();\n\n    type IAction = () => void;\n\n    const actions: IAction[] = [];\n    frames.forEach((frame) => {\n        const { height, width, top, right, bottom, left } = frame.getBoundingClientRect();\n\n        const frameStyle = getComputedStyle(frame);\n        const borderLeft = parseInt(frameStyle.borderLeftWidth, 10);\n        const borderTop = parseInt(frameStyle.borderTopWidth, 10);\n        const borderRight = parseInt(frameStyle.borderRightWidth, 10);\n        const borderBottom = parseInt(frameStyle.borderBottomWidth, 10);\n\n        let blockScroll = 0;\n        let inlineScroll = 0;\n\n        // The property existance checks for offfset[Width|Height] is because only HTMLElement objects have them,\n        // but any Element might pass by here\n        // @TODO find out if the \"as HTMLElement\" overrides can be dropped\n        const scrollbarWidth =\n            \"offsetWidth\" in frame\n                ? (frame as HTMLElement).offsetWidth - (frame as HTMLElement).clientWidth - borderLeft - borderRight\n                : 0;\n        const scrollbarHeight =\n            \"offsetHeight\" in frame\n                ? (frame as HTMLElement).offsetHeight - (frame as HTMLElement).clientHeight - borderTop - borderBottom\n                : 0;\n\n        if (scrollingElement === frame) {\n            // Handle viewport logic (document.documentElement or document.body)\n\n            switch (alignY) {\n                case ScrollAlignment.LeftOrTop: {\n                    blockScroll = targetBlock;\n                    break;\n                }\n                case ScrollAlignment.RightOrBottom: {\n                    blockScroll = targetBlock - viewportHeight;\n                    break;\n                }\n                case ScrollAlignment.CenterAlways: {\n                    blockScroll = targetBlock - viewportHeight / 2;\n                    break;\n                }\n                case ScrollAlignment.ToEdgeIfNeeded: {\n                    blockScroll = alignNearest(\n                        viewportY,\n                        viewportY + viewportHeight,\n                        viewportHeight,\n                        borderTop,\n                        borderBottom,\n                        viewportY + targetBlock,\n                        viewportY + targetBlock + targetHeight,\n                        targetHeight,\n                    );\n                    break;\n                }\n            }\n\n            switch (alignX) {\n                case ScrollAlignment.LeftOrTop: {\n                    inlineScroll = targetInline;\n                    break;\n                }\n                case ScrollAlignment.RightOrBottom: {\n                    inlineScroll = targetInline - viewportWidth;\n                    break;\n                }\n                case ScrollAlignment.CenterAlways: {\n                    inlineScroll = targetInline - viewportWidth / 2;\n                    break;\n                }\n                case ScrollAlignment.ToEdgeIfNeeded: {\n                    inlineScroll = alignNearest(\n                        viewportX,\n                        viewportX + viewportWidth,\n                        viewportWidth,\n                        borderLeft,\n                        borderRight,\n                        viewportX + targetInline,\n                        viewportX + targetInline + targetWidth,\n                        targetWidth,\n                    );\n                    break;\n                }\n            }\n\n            blockScroll += viewportY;\n            inlineScroll += viewportX;\n        } else {\n            // Handle each scrolling frame that might exist between the target and the viewport\n\n            switch (alignY) {\n                case ScrollAlignment.LeftOrTop: {\n                    blockScroll = targetBlock - top - borderTop;\n                    break;\n                }\n                case ScrollAlignment.RightOrBottom: {\n                    blockScroll = targetBlock - bottom + borderBottom + scrollbarHeight;\n                    break;\n                }\n                case ScrollAlignment.CenterAlways: {\n                    blockScroll = targetBlock - (top + height / 2) + scrollbarHeight / 2;\n                    break;\n                }\n                case ScrollAlignment.ToEdgeIfNeeded: {\n                    blockScroll = alignNearest(\n                        top,\n                        bottom,\n                        height,\n                        borderTop,\n                        borderBottom + scrollbarHeight,\n                        targetBlock,\n                        targetBlock + targetHeight,\n                        targetHeight,\n                    );\n                    break;\n                }\n            }\n\n            switch (alignX) {\n                case ScrollAlignment.LeftOrTop: {\n                    inlineScroll = targetInline - left - borderLeft;\n                    break;\n                }\n                case ScrollAlignment.RightOrBottom: {\n                    inlineScroll = targetInline - right + borderRight + scrollbarWidth;\n                    break;\n                }\n                case ScrollAlignment.CenterAlways: {\n                    inlineScroll = targetInline - (left + width / 2) + scrollbarWidth / 2;\n                    break;\n                }\n                case ScrollAlignment.ToEdgeIfNeeded: {\n                    inlineScroll = alignNearest(\n                        left,\n                        right,\n                        width,\n                        borderLeft,\n                        borderRight + scrollbarWidth,\n                        targetInline,\n                        targetInline + targetWidth,\n                        targetWidth,\n                    );\n                    break;\n                }\n            }\n\n            const { scrollLeft, scrollTop } = frame;\n            // Ensure scroll coordinates are not out of bounds while applying scroll offsets\n            blockScroll = clamp(scrollTop + blockScroll, frame.scrollHeight - height + scrollbarHeight);\n            inlineScroll = clamp(scrollLeft + inlineScroll, frame.scrollWidth - width + scrollbarWidth);\n\n            // Cache the offset so that parent frames can scroll this into view correctly\n            targetBlock += scrollTop - blockScroll;\n            targetInline += scrollLeft - inlineScroll;\n        }\n\n        actions.push(() => elementScroll(frame, { ...options, top: blockScroll, left: inlineScroll }));\n    });\n\n    actions.forEach((run) => run());\n};\n\nexport const elementScrollIntoViewPolyfill = (animationOptions?: IAnimationOptions): void => {\n    if (isScrollBehaviorSupported()) {\n        return;\n    }\n\n    const originalFunc = original.elementScrollIntoView;\n\n    modifyPrototypes(\n        (prototype) =>\n            (prototype.scrollIntoView = function scrollIntoView(): void {\n                const scrollIntoViewOptions = arguments[0];\n\n                if (arguments.length === 1 && isObject(scrollIntoViewOptions)) {\n                    return elementScrollIntoView(this, { ...scrollIntoViewOptions, ...animationOptions });\n                }\n\n                return originalFunc.apply(this, arguments as any);\n            }),\n    );\n};\n","import { IAnimationOptions, isObject, isScrollBehaviorSupported, modifyPrototypes, original } from \"./common.js\";\nimport { elementScroll } from \"./Element.scroll.js\";\n\nexport { elementScroll as elementScrollTo } from \"./Element.scroll.js\";\n\nexport const elementScrollToPolyfill = (animationOptions?: IAnimationOptions): void => {\n    if (isScrollBehaviorSupported()) {\n        return;\n    }\n\n    const originalFunc = original.elementScroll;\n\n    modifyPrototypes(\n        (prototype) =>\n            (prototype.scrollTo = function scrollTo() {\n                if (arguments.length === 1) {\n                    const scrollToOptions = arguments[0];\n                    if (!isObject(scrollToOptions)) {\n                        throw new TypeError(\n                            \"Failed to execute 'scrollTo' on 'Element': parameter 1 ('options') is not an object.\",\n                        );\n                    }\n\n                    const left = Number(scrollToOptions.left);\n                    const top = Number(scrollToOptions.top);\n\n                    return elementScroll(this, { ...scrollToOptions, left, top, ...animationOptions });\n                }\n\n                return originalFunc.apply(this, arguments as any);\n            }),\n    );\n};\n","import {\n    IAnimationOptions,\n    IContext,\n    IScrollToOptions,\n    isObject,\n    isScrollBehaviorSupported,\n    nonFinite,\n    now,\n    original,\n    step,\n} from \"./common.js\";\n\nexport const windowScroll = (options: IScrollToOptions): void => {\n    const originalBoundFunc = original.windowScroll.bind(window);\n\n    if (options.left === undefined && options.top === undefined) {\n        return;\n    }\n\n    const startX = window.scrollX || window.pageXOffset;\n    const startY = window.scrollY || window.pageYOffset;\n\n    const targetX = nonFinite(options.left ?? startX);\n    const targetY = nonFinite(options.top ?? startY);\n\n    if (options.behavior !== \"smooth\") {\n        return originalBoundFunc(targetX, targetY);\n    }\n\n    const removeEventListener = () => {\n        window.removeEventListener(\"wheel\", cancelScroll);\n        window.removeEventListener(\"touchmove\", cancelScroll);\n    };\n\n    const context: IContext = {\n        timeStamp: now(),\n        duration: options.duration,\n        startX,\n        startY,\n        targetX,\n        targetY,\n        rafId: 0,\n        method: originalBoundFunc,\n        timingFunc: options.timingFunc,\n        callback: removeEventListener,\n    };\n\n    const cancelScroll = () => {\n        cancelAnimationFrame(context.rafId);\n        removeEventListener();\n    };\n\n    window.addEventListener(\"wheel\", cancelScroll, {\n        passive: true,\n        once: true,\n    });\n    window.addEventListener(\"touchmove\", cancelScroll, {\n        passive: true,\n        once: true,\n    });\n\n    step(context);\n};\n\nexport const windowScrollPolyfill = (animationOptions?: IAnimationOptions): void => {\n    if (isScrollBehaviorSupported()) {\n        return;\n    }\n\n    const originalFunc = original.windowScroll;\n\n    window.scroll = function scroll() {\n        if (arguments.length === 1) {\n            const scrollOptions = arguments[0];\n            if (!isObject(scrollOptions)) {\n                throw new TypeError(\n                    \"Failed to execute 'scroll' on 'Window': parameter 1 ('options') is not an object.\",\n                );\n            }\n\n            return windowScroll({ ...scrollOptions, ...animationOptions });\n        }\n\n        return originalFunc.apply(this, arguments as any);\n    };\n};\n","import {\n    IAnimationOptions,\n    IScrollToOptions,\n    isObject,\n    isScrollBehaviorSupported,\n    nonFinite,\n    original,\n} from \"./common.js\";\nimport { windowScroll } from \"./Window.scroll.js\";\n\nexport const windowScrollBy = (options: IScrollToOptions): void => {\n    const left = nonFinite(options.left || 0) + (window.scrollX || window.pageXOffset);\n    const top = nonFinite(options.top || 0) + (window.scrollY || window.pageYOffset);\n\n    if (options.behavior !== \"smooth\") {\n        return original.windowScroll.call(window, left, top);\n    }\n\n    return windowScroll({ ...options, left, top });\n};\n\nexport const windowScrollByPolyfill = (animationOptions?: IAnimationOptions): void => {\n    if (isScrollBehaviorSupported()) {\n        return;\n    }\n\n    window.scrollBy = function scrollBy() {\n        if (arguments.length === 1) {\n            const scrollByOptions = arguments[0];\n            if (!isObject(scrollByOptions)) {\n                throw new TypeError(\n                    \"Failed to execute 'scrollBy' on 'Window': parameter 1 ('options') is not an object.\",\n                );\n            }\n\n            return windowScrollBy({ ...scrollByOptions, ...animationOptions });\n        }\n\n        const left = Number(arguments[0]);\n        const top = Number(arguments[1]);\n\n        return windowScrollBy({ left, top });\n    };\n};\n","import { IAnimationOptions, isObject, isScrollBehaviorSupported, original } from \"./common.js\";\nimport { windowScroll } from \"./Window.scroll.js\";\n\nexport { windowScroll as windowScrollTo } from \"./Window.scroll.js\";\n\nexport const windowScrollToPolyfill = (animationOptions?: IAnimationOptions): void => {\n    if (isScrollBehaviorSupported()) {\n        return;\n    }\n\n    const originalFunc = original.windowScroll;\n\n    window.scrollTo = function scrollTo() {\n        if (arguments.length === 1) {\n            const scrollToOptions = arguments[0];\n            if (!isObject(scrollToOptions)) {\n                throw new TypeError(\n                    \"Failed to execute 'scrollTo' on 'Window': parameter 1 ('options') is not an object.\",\n                );\n            }\n\n            const left = Number(scrollToOptions.left);\n            const top = Number(scrollToOptions.top);\n\n            return windowScroll({ ...scrollToOptions, left, top, ...animationOptions });\n        }\n\n        return originalFunc.apply(this, arguments as any);\n    };\n};\n","import { IAnimationOptions, isScrollBehaviorSupported } from \"./common.js\";\nimport { elementScrollPolyfill } from \"./Element.scroll.js\";\nimport { elementScrollByPolyfill } from \"./Element.scrollBy.js\";\nimport { elementScrollIntoViewPolyfill } from \"./Element.scrollIntoView.js\";\nimport { elementScrollToPolyfill } from \"./Element.scrollTo.js\";\nimport { windowScrollPolyfill } from \"./Window.scroll.js\";\nimport { windowScrollByPolyfill } from \"./Window.scrollBy.js\";\nimport { windowScrollToPolyfill } from \"./Window.scrollTo.js\";\n\nexport const polyfill = (options?: IAnimationOptions): void => {\n    if (isScrollBehaviorSupported()) {\n        return;\n    }\n\n    windowScrollPolyfill(options);\n    windowScrollToPolyfill(options);\n    windowScrollByPolyfill(options);\n\n    elementScrollPolyfill(options);\n    elementScrollToPolyfill(options);\n    elementScrollByPolyfill(options);\n    elementScrollIntoViewPolyfill(options);\n};\n\nexport { elementScroll, elementScrollPolyfill } from \"./Element.scroll.js\";\nexport { elementScrollBy, elementScrollByPolyfill } from \"./Element.scrollBy.js\";\nexport { elementScrollIntoView, elementScrollIntoViewPolyfill } from \"./Element.scrollIntoView.js\";\nexport { elementScrollTo, elementScrollToPolyfill } from \"./Element.scrollTo.js\";\nexport { windowScroll, windowScrollPolyfill } from \"./Window.scroll.js\";\nexport { windowScrollBy, windowScrollByPolyfill } from \"./Window.scrollBy.js\";\nexport { windowScrollTo, windowScrollToPolyfill } from \"./Window.scrollTo.js\";\nexport { polyfill as seamless };\n"],"names":[],"mappings":"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"}